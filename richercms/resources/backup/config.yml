# Autogenerated bulkloader.yaml file.
# You must edit this file before using it. TODO: Remove this line when done.
# At a minimum address the items marked with TODO:
#  * Fill in connector and connector_options
#  * Review the property_map.
#    - Ensure the 'external_name' matches the name of your CSV column,
#      XML tag, etc.
#    - Check that __key__ property is what you want. Its value will become
#      the key name on import, and on export the value will be the Key
#      object.  If you would like automatic key generation on import and
#      omitting the key on export, you can remove the entire __key__
#      property from the property map.

# If you have module(s) with your model classes, add them here. Also
# change the kind properties to model_class.
python_preamble:
- import: base64
- import: re
- import: transformhelper
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.ext.db
- import: google.appengine.api.datastore
- import: google.appengine.api.users

transformers:

- kind: ArboPage
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /ArboPages/ArboPage
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('ArboPage', key_is_id=True) 

    - property: creationDate
      external_name: creationDate
      # Type: Date/Time Stats: 16 properties of this type in this kind.
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

    - property: idChildArboPage
      external_name: ArboPagesId
      # Type: Integer Stats: 15 properties of this type in this kind.
      # transform.none_if_empty(int)
      import_transform: transformhelper.list_from_child_node('ArboPagesId/ArboPageId')
      export_transform: transformhelper.child_node_from_list('ArboPageId')

    - property: idUserInModif
      external_name: idUserInModif
      # Type: Integer Stats: 16 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: parentId
      external_name: parentId
      # Type: Integer Stats: 14 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: publicationFinish
      external_name: publicationFinish
      # Type: Date/Time Stats: 16 properties of this type in this kind.
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

    - property: publicationStart
      external_name: publicationStart
      # Type: Date/Time Stats: 16 properties of this type in this kind.
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

    - property: tagsId
      external_name: TagsId
      # Type: Integer Stats: 18 properties of this type in this kind.
      import_transform: transformhelper.list_from_child_node('TagsId/Tag')
      export_transform: transformhelper.child_node_from_list('Tag')

    - property: templateId
      external_name: templateId
      # Type: Integer Stats: 16 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: translation
      external_name: TranslationPages
      # Type: Key Stats: 32 properties of this type in this kind.
      #import_transform: transformhelper.key_list_from_child_node('TranslationPages/TranslationPage', 'TranslationPage')
      export_transform: transformhelper.child_node_from_list_key('TranslationPage')

    - property: urlName
      external_name: urlName
      # Type: String Stats: 16 properties of this type in this kind.


- kind: Configuration
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /Configurations/Configuration
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('Configuration', key_is_id=True) 

    - property: isConfigured
      external_name: isConfigured
      # Type: Boolean Stats: 1 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)


- kind: DependentTag
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /DependentTags/DependentTag
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('DependentTag', key_is_id=True) 

    - property: customName
      external_name: customName
      # Type: String Stats: 19 properties of this type in this kind.

    - property: correspTagId
      external_name: correspTagId

    - property: pageId
      external_name: pageId

- kind: Language
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /Languages/Language
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('Language', key_is_id=True) 

    - property: langue
      external_name: langue
      # Type: String Stats: 2 properties of this type in this kind.

    - property: selected
      external_name: selected
      # Type: Boolean Stats: 2 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: tag
      external_name: tag
      # Type: String Stats: 2 properties of this type in this kind.

    - property: translationID
      external_name: translationID
      # Type: Integer Stats: 2 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: translationKey
      external_name: translationKey
      # Type: String Stats: 2 properties of this type in this kind.


- kind: Langue
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /Langues/Langue
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('Langue', key_is_id=True) 

    - property: langue
      external_name: langue
      # Type: String Stats: 3 properties of this type in this kind.

    - property: selected
      external_name: selected
      # Type: Boolean Stats: 3 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)


- kind: LogInfo
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /LogInfos/LogInfo
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('LogInfo', key_is_id=True) 

    - property: className
      external_name: className
      # Type: String Stats: 463 properties of this type in this kind.

    - property: desc
      external_name: desc
      # Type: String Stats: 463 properties of this type in this kind.

    - property: duration
      external_name: duration
      # Type: Integer Stats: 463 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: methodName
      external_name: methodName
      # Type: String Stats: 463 properties of this type in this kind.


- kind: MemoryFileItem
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /MemoryFileItems/MemoryFileItem
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('MemoryFileItem', key_is_id=True) 

    - property: contentType
      external_name: contentType
      # Type: String Stats: 11 properties of this type in this kind.

    - property: content
      external_name: content
      # Type: Blob Stats: 11 properties of this type in this kind.
      import_transform: transformhelper.file_to_blob()
      export_transform: transformhelper.blob_to_file('fileName', 'images')

    - property: date_created
      external_name: date_created
      # Type: Date/Time Stats: 11 properties of this type in this kind.
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

    - property: fieldName
      external_name: fieldName
      # Type: String Stats: 11 properties of this type in this kind.

    - property: fileName
      external_name: fileName
      # Type: String Stats: 11 properties of this type in this kind.

    - property: path
      external_name: path
      # Type: String Stats: 11 properties of this type in this kind.


- kind: Page
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /Pages/Page
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('Page', key_is_id=True) 

    - property: browserTitle
      external_name: browserTitle
      # Type: String Stats: 5 properties of this type in this kind.

    - property: browser_title
      external_name: browser_title
      # Type: String Stats: 5 properties of this type in this kind.

    - property: content
      external_name: content
      # Type: String Stats: 5 properties of this type in this kind.

    - property: description
      external_name: description
      # Type: String Stats: 5 properties of this type in this kind.

    - property: keyWord
      external_name: keyWord
      # Type: String Stats: 5 properties of this type in this kind.

    - property: pageTitle
      external_name: pageTitle
      # Type: String Stats: 5 properties of this type in this kind.

    - property: page_title
      external_name: page_title
      # Type: String Stats: 5 properties of this type in this kind.

    - property: pages_INTEGER_IDX
      external_name: pages_INTEGER_IDX
      # Type: Integer Stats: 2 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: publicationFinish
      external_name: publicationFinish
      # Type: String Stats: 5 properties of this type in this kind.

    - property: publicationStart
      external_name: publicationStart
      # Type: String Stats: 5 properties of this type in this kind.

    - property: publish_date
      external_name: publish_date
      # Type: Date/Time Stats: 5 properties of this type in this kind.
      import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
      export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

    - property: subPages_INTEGER_IDX
      external_name: subPages_INTEGER_IDX
      # Type: Integer Stats: 3 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: unique_name
      external_name: unique_name
      # Type: String Stats: 1 properties of this type in this kind.

    - property: urlName
      external_name: urlName
      # Type: String Stats: 5 properties of this type in this kind.

    - property: url_name
      external_name: url_name
      # Type: String Stats: 5 properties of this type in this kind.


- kind: RootArbo
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /RootArbos/RootArbo
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('RootArbo', key_is_id=True) 

    - property: idChildArboPage
      external_name: idChildArboPage
      # Type: String Stats: 9 properties of this type in this kind.

    - property: idOfRootArboPage
      external_name: idOfRootArboPage
      # Type: Integer Stats: 1 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: keyOfRootArboPage
      external_name: keyOfRootArboPage
      # Type: String Stats: 1 properties of this type in this kind.


- kind: Tag
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /Tags/Tag
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('Tag', key_is_id=True) 

    - property: description
      external_name: description
      # Type: String Stats: 5 properties of this type in this kind.

    - property: isTextual
      external_name: isTextual
      # Type: Boolean Stats: 5 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: shortLib
      external_name: shortLib
      # Type: String Stats: 5 properties of this type in this kind.

    - property: tagName
      external_name: tagName
      # Type: String Stats: 5 properties of this type in this kind.


- kind: Template
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /Templates/Template
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('Template', key_is_id=True) 

    - property: associatedTags
      external_name: AssociatedTags
      # Type: Key Stats: 6 properties of this type in this kind.
      import_transform: transformhelper.key_list_from_child_node('AssociatedTags/Tag', 'Tag')
      export_transform: transformhelper.child_node_from_list_key('Tag')

    - property: description
      external_name: description
      # Type: String Stats: 2 properties of this type in this kind.

    - property: name
      external_name: name
      # Type: String Stats: 2 properties of this type in this kind.

    - property: shortLib
      external_name: shortLib
      # Type: String Stats: 2 properties of this type in this kind.


- kind: TranslationPage
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /TranslationPages/TranslationPage
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('TranslationPage', key_is_id=True) 

    - property: browserTitle
      external_name: browserTitle
      # Type: String Stats: 32 properties of this type in this kind.

    - property: content
      external_name: content
      # Type: Text Stats: 32 properties of this type in this kind.
      import_transform: db.Text

    - property: description
      external_name: description
      # Type: String Stats: 32 properties of this type in this kind.

    - property: keyWord
      external_name: keyWord
      # Type: String Stats: 32 properties of this type in this kind.

    - property: pageTitle
      external_name: pageTitle
      # Type: String Stats: 32 properties of this type in this kind.

    - property: publicationFinish
      external_name: publicationFinish
      # Type: String Stats: 9 properties of this type in this kind.

    - property: publicationStart
      external_name: publicationStart
      # Type: String Stats: 9 properties of this type in this kind.

    - property: translation_INTEGER_IDX
      external_name: translation_INTEGER_IDX
      # Type: Integer Stats: 20 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: urlName
      external_name: urlName
      # Type: String Stats: 3 properties of this type in this kind.


- kind: UnlinkedFile
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /UnlinkedFiles/UnlinkedFile
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('UnlinkedFile', key_is_id=True) 

    - property: idUnlinkedImg
      external_name: idUnlinkedImg
      # Type: Integer Stats: 7 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)


- kind: User
  connector: simplexml 
  connector_options:
    xpath_to_nodes: /Users/User
    style: element_centric
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('User', key_is_id=True) 

    - property: emailAddress
      external_name: emailAddress
      # Type: String Stats: 3 properties of this type in this kind.

    - property: isAdmin
      external_name: isAdmin
      # Type: Boolean Stats: 3 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: loggedIn
      external_name: loggedIn
      # Type: Boolean Stats: 3 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: nickname
      external_name: nickname
      # Type: String Stats: 3 properties of this type in this kind.
